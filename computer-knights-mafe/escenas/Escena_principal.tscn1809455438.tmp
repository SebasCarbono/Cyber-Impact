[gd_scene load_steps=34 format=3 uid="uid://ov3hl4u40ru0"]

[ext_resource type="Script" uid="uid://dr5vuml514c2v" path="res://codigos/Escena_principal.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://b0o2lhwuvmkd" path="res://escenas/laberinto_circular.tscn" id="2"]
[ext_resource type="PackedScene" uid="uid://luxwilfxj4ew" path="res://escenas/Laberinto_cuadrado.tscn" id="3"]
[ext_resource type="PackedScene" uid="uid://bvw3v740s48re" path="res://escenas/Suelo.tscn" id="4"]
[ext_resource type="Script" uid="uid://gqcisruv145l" path="res://escenas/game_state.gd" id="4_44eu1"]
[ext_resource type="PackedScene" uid="uid://bwqolo43kgnt6" path="res://escenas/esfera.tscn" id="5"]
[ext_resource type="Script" uid="uid://byjovvo3jpq6" path="res://codigos/Camera.gd" id="6"]
[ext_resource type="PackedScene" uid="uid://c8kxj30gocsn0" path="res://escenas/llave.tscn" id="7"]
[ext_resource type="PackedScene" path="res://escenas/candado.tscn" id="8"]
[ext_resource type="AudioStream" uid="uid://b03on6xhv1cui" path="res://musica_y_vfx/Yu_City_Kamata.ogg" id="9"]
[ext_resource type="AudioStream" uid="uid://bojqtbkglxfd5" path="res://musica_y_vfx/Paintball_Theme.ogg" id="10"]
[ext_resource type="AudioStream" uid="uid://c6envgs1tjrt1" path="res://musica_y_vfx/powerUP.wav" id="11"]
[ext_resource type="AudioStream" uid="uid://br32g1sy7bvgo" path="res://musica_y_vfx/lose sound 1-2.wav" id="12"]
[ext_resource type="AudioStream" uid="uid://uj6uft37goab" path="res://musica_y_vfx/Barge_Sting.wav" id="13"]
[ext_resource type="AudioStream" uid="uid://b4b8l80six8c0" path="res://musica_y_vfx/Barge_Sting.ogg" id="14"]
[ext_resource type="AudioStream" uid="uid://db8rahyfd1s6x" path="res://musica_y_vfx/iniciar_click.ogg" id="15"]
[ext_resource type="AudioStream" uid="uid://76xm3pp4b5lj" path="res://musica_y_vfx/Conteo_sonido.wav" id="16"]
[ext_resource type="AudioStream" uid="uid://c48o177efndfv" path="res://musica_y_vfx/Victory sound effect.wav" id="17"]
[ext_resource type="FontFile" uid="uid://nw4xh0xtkuig" path="res://typografias/Pixeltype.ttf" id="21"]

[sub_resource type="Sky" id="1"]

[sub_resource type="Environment" id="2"]
background_mode = 2
background_color = Color(0.647059, 1, 0, 1)
sky = SubResource("1")

[sub_resource type="BoxShape3D" id="3"]
size = Vector3(2, 2, 3.65964)

[sub_resource type="Animation" id="4"]
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Interface_UI/Game over:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector2(121, -200), Vector2(121, 240), Vector2(121, 281.91), Vector2(121, 240)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Interface_UI/colorfondoMuerte:color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0.14902, 0.14902, 0.14902, 0), Color(0.14902, 0.14902, 0.14902, 0.611765)]
}

[sub_resource type="Animation" id="5"]
resource_name = "winner_animacion"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Interface_UI/Winner_texto:theme_override_colors/font_color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Interface_UI/Winner_texto/info winner:theme_override_colors/font_color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Interface_UI/Winner_texto:theme_override_colors/font_shadow_color")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(0, 0, 0, 1)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Interface_UI/Winner_texto/info winner:theme_override_colors/font_shadow_color")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0, 0, 0, 0), Color(0, 0, 0, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_oxw6p"]
_data = {
&"Game_over_animacion": SubResource("4"),
&"winner_animacion": SubResource("5")
}

[sub_resource type="Animation" id="6"]
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("iluminacion/WorldEnvironment:environment:background_energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [1.0, 0.1]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("iluminacion/DirectionalLight3D:light_energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [1.0, 0.1]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("personaje/Camera3D/luz_personaje:light_energy")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 3.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_dwu0c"]
_data = {
&"claridad_mundo": SubResource("6")
}

[sub_resource type="BoxShape3D" id="7"]
size = Vector3(58.3892, 9.98204, 149.704)

[sub_resource type="FontFile" id="8"]
fallbacks = Array[Font]([ExtResource("21")])
cache/0/16/0/ascent = 0.0
cache/0/16/0/descent = 0.0
cache/0/16/0/underline_position = 0.0
cache/0/16/0/underline_thickness = 0.0
cache/0/16/0/scale = 1.0

[sub_resource type="FontFile" id="9"]
fallbacks = Array[Font]([ExtResource("21")])
cache/0/16/0/ascent = 0.0
cache/0/16/0/descent = 0.0
cache/0/16/0/underline_position = 0.0
cache/0/16/0/underline_thickness = 0.0
cache/0/16/0/scale = 1.0

[sub_resource type="FontFile" id="10"]
fallbacks = Array[Font]([ExtResource("21")])
cache/0/16/0/ascent = 0.0
cache/0/16/0/descent = 0.0
cache/0/16/0/underline_position = 0.0
cache/0/16/0/underline_thickness = 0.0
cache/0/16/0/scale = 1.0

[sub_resource type="FontFile" id="11"]
fallbacks = Array[Font]([ExtResource("21")])
cache/0/16/0/ascent = 0.0
cache/0/16/0/descent = 0.0
cache/0/16/0/underline_position = 0.0
cache/0/16/0/underline_thickness = 0.0
cache/0/16/0/scale = 1.0

[sub_resource type="FontFile" id="12"]
fallbacks = Array[Font]([ExtResource("21")])
cache/0/16/0/ascent = 0.0
cache/0/16/0/descent = 0.0
cache/0/16/0/underline_position = 0.0
cache/0/16/0/underline_thickness = 0.0
cache/0/16/0/scale = 1.0

[node name="Escena_principal" type="Node3D" groups=["Escena_principal"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 86.10941, 0, 19.562834)
script = ExtResource("1")

[node name="iluminacion" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="iluminacion"]
transform = Transform3D(0.34185305, -0.6366718, -0.6912204, 0.5032391, -0.49716082, 0.7068109, -0.79365414, -0.58947456, 0.15044218, 0.20012283, 40.884, -0.0422554)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="iluminacion"]
environment = SubResource("2")

[node name="laberintos" type="Node3D" parent="."]

[node name="laberinto_circular" parent="laberintos" instance=ExtResource("2")]
transform = Transform3D(-0.57277274, 0, 0.82050085, 0, 1.0006449, 0, -0.82050085, 0, -0.57277274, 0, 0, -0.22854614)

[node name="Laberinto_cuadrado" parent="laberintos" instance=ExtResource("3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.1119537, 0, -18.699158)

[node name="GameState" type="Node3D" parent="laberintos/Laberinto_cuadrado"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 108.51989, 0, 28.341906)
script = ExtResource("4_44eu1")

[node name="nodo_1" type="Area3D" parent="laberintos/Laberinto_cuadrado/GameState"]
transform = Transform3D(0.3706348, 0, -1.2179307, 0, 1, 0, 0.39092267, 0, 1.1547232, -23.906998, 0, -2.6787872)

[node name="CollisionShape3D" type="CollisionShape3D" parent="laberintos/Laberinto_cuadrado/GameState/nodo_1"]

[node name="nodo_2" type="Area3D" parent="laberintos/Laberinto_cuadrado/GameState"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.945908, 0, -44.06588)

[node name="CollisionShape3D" type="CollisionShape3D" parent="laberintos/Laberinto_cuadrado/GameState/nodo_2"]

[node name="nodo_3" type="Area3D" parent="laberintos/Laberinto_cuadrado/GameState"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.738556, 0, -44.439316)

[node name="CollisionShape3D" type="CollisionShape3D" parent="laberintos/Laberinto_cuadrado/GameState/nodo_3"]

[node name="nodo_4" type="Area3D" parent="laberintos/Laberinto_cuadrado/GameState"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -24.183922, 0, -24.631104)

[node name="CollisionShape3D" type="CollisionShape3D" parent="laberintos/Laberinto_cuadrado/GameState/nodo_4"]

[node name="nodo_5" type="Area3D" parent="laberintos/Laberinto_cuadrado/GameState"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.260933, 0, -38.079514)

[node name="CollisionShape3D" type="CollisionShape3D" parent="laberintos/Laberinto_cuadrado/GameState/nodo_5"]

[node name="nodo_6" type="Area3D" parent="laberintos/Laberinto_cuadrado/GameState"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.37127686, 0, -20.039085)

[node name="CollisionShape3D" type="CollisionShape3D" parent="laberintos/Laberinto_cuadrado/GameState/nodo_6"]

[node name="nodo_7" type="Area3D" parent="laberintos/Laberinto_cuadrado/GameState"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.5068893, 0, -3.112728)

[node name="CollisionShape3D" type="CollisionShape3D" parent="laberintos/Laberinto_cuadrado/GameState/nodo_7"]

[node name="nodo_8" type="Area3D" parent="laberintos/Laberinto_cuadrado/GameState"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.713249, 0, -20.689735)

[node name="CollisionShape3D" type="CollisionShape3D" parent="laberintos/Laberinto_cuadrado/GameState/nodo_8"]

[node name="Suelo" parent="laberintos" instance=ExtResource("4")]
transform = Transform3D(0.999976, 4.4629903e-10, 0.0069463537, -4.4628948e-10, 1, -2.9175488e-12, -0.0069463537, -1.8349515e-13, 0.999976, 0.30765915, 0.2849579, 0.031151056)

[node name="personaje" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30.102234, 1, 39.01474)

[node name="esfera" parent="personaje" instance=ExtResource("5")]
transform = Transform3D(0.9998406, 0.0017037462, -0.017772285, 0.01785377, -0.0954126, 0.99527735, 0, -0.995436, -0.0954278, 30.312195, 0.00095653534, -38.750206)

[node name="Camera3D" type="Camera3D" parent="personaje"]
transform = Transform3D(0.9998406, 7.804133e-10, -0.01785377, 0.01785377, -4.3704432e-08, 0.9998406, 0, -1, -4.37114e-08, 30.097946, 11.999043, -38.750206)
script = ExtResource("6")

[node name="luz_personaje" type="SpotLight3D" parent="personaje/Camera3D" groups=["luz_personaje"]]
transform = Transform3D(1, 0, 0, 0, 1, -1.06581e-14, 0, 1.06581e-14, 1, 0, 0, -6.61171)
light_energy = 0.0
shadow_enabled = true
spot_range = 13.1203
spot_angle = 59.599

[node name="llave_y_candado" type="Node3D" parent="."]

[node name="llave" parent="llave_y_candado" instance=ExtResource("7")]
transform = Transform3D(0.53867376, 0, -0.32851374, 0, 1, 0, 0.3571619, 0, 0.4954664, 15.270611, 0.691, -42.92877)

[node name="Area_candado" type="Area3D" parent="llave_y_candado" groups=["Area_candado"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 80.1829, 2.20931, 20.3049)

[node name="CollisionShape3D" type="CollisionShape3D" parent="llave_y_candado/Area_candado"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.7177887, 0, -18.699158)
shape = SubResource("3")

[node name="posicion_inicio" type="Node3D" parent="llave_y_candado"]

[node name="candado" parent="." instance=ExtResource("8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 84.59625, 2.20931, 1.6057425)

[node name="Timer_espera" type="Timer" parent="."]
wait_time = 120.0
one_shot = true

[node name="Timer_cuanto_falto" type="Timer" parent="."]

[node name="AnimationPlayerPrincipal" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_oxw6p")
}

[node name="animacion_mundo" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_dwu0c")
}

[node name="area_winner" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 161.788, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="area_winner"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.73782, 0, 0)
shape = SubResource("7")

[node name="Musica_and_sfx" type="Node" parent="."]

[node name="musica_normal" type="AudioStreamPlayer" parent="Musica_and_sfx" groups=["musica_normal"]]
stream = ExtResource("9")
autoplay = true
bus = &"musica_normal"

[node name="musica_rapida" type="AudioStreamPlayer" parent="Musica_and_sfx" groups=["musica_rapida"]]
stream = ExtResource("10")
bus = &"musica_rapida"

[node name="sfx_llave" type="AudioStreamPlayer" parent="Musica_and_sfx" groups=["sfx_llave"]]
stream = ExtResource("11")
bus = &"sfx_llave"

[node name="sfx_puerta_cerrada" type="AudioStreamPlayer" parent="Musica_and_sfx" groups=["sfx_puerta_cerrada"]]
stream = ExtResource("12")
bus = &"sfx_puerta_cerrada"

[node name="sfx_puerta_abierta" type="AudioStreamPlayer" parent="Musica_and_sfx" groups=["sfx_puerta_abierta"]]
stream = ExtResource("13")
bus = &"sfx_puerta_abierta"

[node name="sfx_puerta_abierta_2" type="AudioStreamPlayer" parent="Musica_and_sfx"]
stream = ExtResource("11")
bus = &"sfx_puerta_abierta_2"

[node name="muerte_sonido" type="AudioStreamPlayer" parent="Musica_and_sfx"]
stream = ExtResource("14")
bus = &"muerte_sonido"

[node name="lose_sonido" type="AudioStreamPlayer" parent="Musica_and_sfx"]
stream = ExtResource("15")
bus = &"lose_sonido"

[node name="conteo_sonido" type="AudioStreamPlayer" parent="Musica_and_sfx"]
stream = ExtResource("16")
bus = &"conteo_sonido"

[node name="winner_sonido" type="AudioStreamPlayer" parent="Musica_and_sfx"]
stream = ExtResource("17")
bus = &"abrio_puerta"

[node name="Interface_UI" type="Node" parent="."]

[node name="tiempo_espera" type="Label" parent="Interface_UI"]
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.34600002
anchor_right = 0.5
anchor_bottom = 0.34600002
offset_left = -404.0
offset_top = -204.20801
offset_right = -100.0
offset_bottom = 24.791992
grow_horizontal = 2
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_fonts/font = SubResource("8")
text = "Tiempo de espera: 120"

[node name="colorfondoMuerte" type="ColorRect" parent="Interface_UI"]
offset_right = 1024.0
offset_bottom = 600.0
color = Color(0.14902, 0.14902, 0.14902, 0)

[node name="Game over" type="Label" parent="Interface_UI"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -581.0
offset_top = -327.0
offset_right = 565.0
offset_bottom = 316.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_fonts/font = SubResource("9")
text = "Game over
"

[node name="Label" type="Label" parent="Interface_UI/Game over"]
layout_mode = 0
offset_left = 9.0
offset_top = 137.0
offset_right = 761.0
offset_bottom = 204.0
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_fonts/font = SubResource("10")
text = "Presione Click o la pantalla para reiniciar"

[node name="Winner_texto" type="Label" parent="Interface_UI"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -301.5
offset_top = -94.5
offset_right = 301.5
offset_bottom = 94.5
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_fonts/font = SubResource("11")
text = "Winner"

[node name="info winner" type="Label" parent="Interface_UI/Winner_texto"]
layout_mode = 0
offset_left = -89.5
offset_top = 154.5
offset_right = 779.5
offset_bottom = 221.5
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_fonts/font = SubResource("12")
text = "Terminaste el juego muchas gracias por probarlo"

[connection signal="body_entered" from="llave_y_candado/llave" to="." method="_on_llave_body_entered"]
[connection signal="body_entered" from="llave_y_candado/Area_candado" to="." method="_on_Area_candado_body_entered"]
[connection signal="timeout" from="Timer_espera" to="." method="_on_Timer_espera_timeout"]
[connection signal="timeout" from="Timer_cuanto_falto" to="." method="_on_Timer_cuanto_falto_timeout"]
[connection signal="body_entered" from="area_winner" to="." method="_on_area_winner_body_entered"]
